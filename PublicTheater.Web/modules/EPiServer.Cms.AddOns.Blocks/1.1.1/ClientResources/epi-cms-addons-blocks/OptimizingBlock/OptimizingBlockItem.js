//>>built
require({cache:{"url:epi-cms-addons-blocks/OptimizingBlock/templates/OptimizingBlockItem.html":"<div class=\"dojoDndItem epi-overlay-block\">\r\n    <div data-dojo-attach-point=\"containerDomNode\">\r\n        <div class=\"epi-content-block-editor\" data-dojo-attach-point=\"optimizingBlockItemNode\">\r\n            <div class=\"epi-optimizing-block\">\r\n                <span class=\"epi-content-block-node\" style=\"height: auto;\">\r\n                    <span data-dojo-attach-point=\"labelNode\" class=\"epi-block-title\"></span>\r\n                </span>\r\n            </div>            \r\n            <div data-dojo-attach-point=\"statisticNode\"></div>\r\n        </div>\r\n    </div>\r\n    <span class=\"epi-overlayControls epi-mediumButton epi-personalized\" data-dojo-attach-point=\"personalizedIcon\">\r\n        <span class=\"dijitReset dijitInline dijitIcon epi-iconUsers\"></span>\r\n    </span>\r\n    <button class=\"epi-chromelessButton epi-overlayControls epi-settingsButton epi-mediumButton\" data-dojo-attach-point=\"settingsButton\" data-dojo-type=\"dijit/form/DropDownButton\" data-dojo-props=\"showLabel:false, title:'${res.settingstooltip}', iconClass:'epi-iconContextMenu'\">\r\n        <span data-dojo-attach-point=\"contextMenu\" data-dojo-type=\"epi/shell/widget/ContextMenu\"></span>\r\n    </button>\r\n</div>\r\n"}});define("epi-cms-addons-blocks/OptimizingBlock/OptimizingBlockItem",["dojo/_base/declare","dojo/_base/lang","dojo/dom-geometry","dojo/dom-style","epi/shell/command/_CommandProviderMixin","epi-cms-addons-blocks/OptimizingBlock/StatisticInfo","epi-cms-addons-blocks/OptimizingBlock/viewmodel/StatisticInfoViewModel","epi-cms/contentediting/command/BlockRemove","epi-cms/contentediting/command/BlockEdit","epi-cms/widget/overlay/Block","dojo/text!./templates/OptimizingBlockItem.html"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b){return _1([_a,_5],{templateString:_b,postMixInProperties:function(){this.inherited(arguments);if(!this.commands||this.commands.length<=0){this.commands=[new _9(),new _8()];}this.commandProvider=this;this.updateCommandModel(this.viewModel);},postCreate:function(){this.inherited(arguments);this.own(this.viewModel.watch("statisticInfo",_2.hitch(this,this._setupUI)));},updatePosition:function(_c){this.inherited(arguments);return this._updateHeight();},_setupUI:function(){this._buildStatisticSegment();this._buildHeadingSegment();this._updateHeight();},_buildHeadingSegment:function(){this.labelNode.innerHTML=this.sourceItemNode.innerHTML;},_buildStatisticSegment:function(){if(!this.statisticInfo){this.statisticInfo=new _6();this.statisticInfo.placeAt(this.statisticNode);}if(this.viewModel.statisticInfo){this.statisticInfo.set("model",new _7(this.viewModel.statisticInfo));}},_updateHeight:function(){var _d=_3.getMarginBox(this.sourceItemNode).h,_e=_3.getMarginBox(this.optimizingBlockItemNode).h,_f={"visibility":"hidden"},_10=_d!=_e;if(_10){_f.height=_e+"px";}_4.set(this.sourceItemNode,_f);return _10;},_onContextMenuClick:function(){this.updateCommandModel(this.viewModel);this.viewModel.set("selected",true);return false;}});});